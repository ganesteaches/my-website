<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ganes Assess – animated hexagon</title>
<style>
:root{
  --r1:     230px;   /* radius to subject icons           */
  --r2:     320px;   /* radius to GCSE / A-Level / IB ring */
  --icon:   100px;   /* subject-icon diameter             */
  --bubble:  70px;   /* qualification-bubble diameter     */
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%}
body{
  display:flex;align-items:center;justify-content:center;
  background:#1a1a1a;font-family:system-ui,sans-serif;color:#e2e8f0;
}

#chart{position:relative;width:900px;height:900px}

/* ── centre logo ─────────────────────────────────────────────── */
#centre{
  position:absolute;top:50%;left:50%;
  width:190px;height:190px;border-radius:50%;overflow:hidden;
  transform:translate(-50%,-50%) scale(1);
  filter:drop-shadow(0 0 16px rgba(56,189,248,.35));
  transition:opacity .3s ease, transform .3s ease;
}
#centre img{width:100%;height:100%;object-fit:cover}

/* ── subject icons ───────────────────────────────────────────── */
.node{
  position:absolute;left:50%;top:50%;
  width:var(--icon);height:var(--icon);
  border-radius:50%;overflow:hidden;border:3px solid #e2e8f0;
  background:#1a1a1a;cursor:pointer;z-index:1;
  display:flex;align-items:center;justify-content:center;
  transform:translate(-50%,-50%) scale(0);      /* animate in */
  transition:transform 1.4s ease-out, opacity .4s ease;
}
.node img{width:70%;height:70%;object-fit:contain}
.science{filter:drop-shadow(0 0 14px #fb923c)}
.maths  {filter:drop-shadow(0 0 14px #60a5fa)}
.misc   {filter:drop-shadow(0 0 14px #a855f7)}

/* ── qualification bubbles ──────────────────────────────────── */
.bubble{
  position:absolute;display:flex;align-items:center;justify-content:center;
  width:var(--bubble);height:var(--bubble);border-radius:50%;
  background:#1a1a1a;border:2px solid #64748b;
  font-size:13px;font-weight:600;color:#e2e8f0;text-decoration:none;
  pointer-events:none;opacity:0;transform:scale(1);
  transition:opacity .35s ease, transform .25s ease;
}
.bubble.show{opacity:1;pointer-events:auto}

/* ── outline ────────────────────────────────────────────────── */
svg{position:absolute;inset:0;pointer-events:none}
polygon{stroke:#64748b;stroke-width:3;fill:none;opacity:.5;
        transition:stroke-dashoffset 2s ease-out}
</style>
</head>
<body>

<div id="chart">
  <svg id="outline"></svg>

  <a id="centre" href="https://www.ganesteaches.com/ganes-assess"
     target="_blank" rel="noopener">
    <img src="../ganes_assess.png" alt="Ganes Assess">
  </a>
</div>

<script>
(function(){
  const BASE="https://www.ganesteaches.com/ganes-assess";
  const subjects=[
    {label:"Biology",       key:"biology",            icon:"../biology_list_icon.png",            cls:"science", angle:150},
    {label:"Chemistry",     key:"chemistry",          icon:"../chemistry_list_icon.png",          cls:"science", angle: 90},
    {label:"Physics",       key:"physics",            icon:"../physics_list_icon.png",            cls:"science", angle: 30},
    {label:"Mathematics",   key:"mathematics",        icon:"../mathematics_list_icon.png",        cls:"maths",   angle:210},
    {label:"Further Maths", key:"further-mathematics",icon:"../further_mathematics_list_icon.png",cls:"maths",   angle:270},
    {label:"Misc",          key:"misc",               icon:"../physics_list_icon.png",            cls:"misc",    angle:330}
  ];
  const quals=["GCSE","A Level","IB"];

  const chart  = document.getElementById("chart"),
        svg    = document.getElementById("outline"),
        centre = document.getElementById("centre");

  const R1 = +getComputedStyle(document.documentElement).getPropertyValue("--r1"),
        R2 = +getComputedStyle(document.documentElement).getPropertyValue("--r2"),
        BUB= +getComputedStyle(document.documentElement).getPropertyValue("--bubble");

  let activeNode = null;

  /* build the DOM ------------------------------------------------ */
  subjects.forEach(s=>{
    const n = document.createElement("div");
    n.className=`node ${s.cls}`;
    n.innerHTML=`<img src="${s.icon}" alt="${s.label}">`;
    chart.appendChild(n);
    s.el = n;

    /* three bubbles per subject */
    s.bubbles = quals.map((q,i)=>{
      const b=document.createElement("a");
      b.className="bubble";
      b.textContent=q;
      b.href=`${BASE}/${s.key}/${q.toLowerCase().replace(/\s+/g,"-")}`;
      b.target="_blank"; b.rel="noopener";
      chart.appendChild(b);

      /* A-Level bubble shrinks its siblings */
      b.addEventListener("mouseenter",()=>{
        b.classList.add("show");
        if(q==="A Level"){
          s.bubbles.forEach(x=>{ if(x!==b) x.style.transform="scale(0.8)"; });
        }
      });
      b.addEventListener("mouseleave",()=>{
        if(activeNode!==s.el) b.classList.remove("show");
        if(q==="A Level"){
          s.bubbles.forEach(x=>{ if(x!==b) x.style.transform="scale(1)"; });
        }
      });
      return b;
    });

    /* subject hover / click behaviour */
    n.addEventListener("mouseenter",()=>{
      hideAllBubbles();

      centre.style.opacity = .9;
      centre.style.transform = "translate(-50%,-50%) scale(.95)";

      subjects.forEach(o=>{
        const scale = (o===s) ? 1 : .875;          // others 12.5 % smaller
        o.el.style.transform = `translate(-50%,-50%) translate(${o.tx}px,${o.ty}px) scale(${scale})`;
        if(o!==s) o.el.style.opacity = .3;
      });
      s.bubbles.forEach(b=>b.classList.add("show"));
    });
    n.addEventListener("mouseleave",()=>{
      subjects.forEach(o=>{
        o.el.style.opacity = 1;
        o.el.style.transform = `translate(-50%,-50%) translate(${o.tx}px,${o.ty}px) scale(1)`;
      });
      centre.style.opacity = 1;
      centre.style.transform = "translate(-50%,-50%) scale(1)";
    });
    n.addEventListener("click",()=>{
      if(activeNode===n){ hideAllBubbles(); activeNode=null; }
      else              { hideAllBubbles(); activeNode=n; s.bubbles.forEach(b=>b.classList.add("show")); }
    });
  });

  /* helper to hide all bubbles */
  function hideAllBubbles(){ subjects.forEach(s=>s.bubbles.forEach(b=>b.classList.remove("show"))); }

  /* single routine that lays everything out --------------------- */
  function layout(){
    const w = chart.clientWidth  || 900,   // fall back if 0
          h = chart.clientHeight || 900,
          cx = w/2,
          cy = h/2;

    /* position subjects + remember their translate offsets */
    subjects.forEach(s=>{
      const rad = s.angle * Math.PI/180;
      s.tx = R1 * Math.cos(rad);
      s.ty = R1 * Math.sin(rad);
      s.el.style.transform = `translate(-50%,-50%) translate(${s.tx}px,${s.ty}px) scale(0)`; // start hidden
    });

    /* position bubbles */
    subjects.forEach(s=>{
      s.bubbles.forEach((b,i)=>{
        const off = -30 + i*30,
              br  = (s.angle+off)*Math.PI/180,
              bx  = cx + R2*Math.cos(br),
              by  = cy + R2*Math.sin(br);
        b.style.left = `${bx - BUB/2}px`;
        b.style.top  = `${by - BUB/2}px`;
      });
    });

    /* redraw outline */
    svg.setAttribute("viewBox",`0 0 ${w} ${h}`);
    svg.innerHTML="";                               // clear old polygon
    const poly = document.createElementNS("http://www.w3.org/2000/svg","polygon");
    poly.setAttribute("points",
      subjects.map(s=>{
        const vx = cx + R1*Math.cos(s.angle*Math.PI/180);
        const vy = cy + R1*Math.sin(s.angle*Math.PI/180);
        return `${vx},${vy}`;
      }).join(" ")
    );
    svg.appendChild(poly);

    /* dash-animation length */
    const per = subjects.reduce((sum,s,i,arr)=>{
      const next = arr[(i+1)%arr.length];
      const vx1 = cx + R1*Math.cos(s.angle   *Math.PI/180);
      const vy1 = cy + R1*Math.sin(s.angle   *Math.PI/180);
      const vx2 = cx + R1*Math.cos(next.angle*Math.PI/180);
      const vy2 = cy + R1*Math.sin(next.angle*Math.PI/180);
      return sum + Math.hypot(vx2-vx1, vy2-vy1);
    },0);
    poly.style.strokeDasharray  = per;
    poly.style.strokeDashoffset = per;

    /* entrance animation */
    requestAnimationFrame(()=>{
      poly.style.strokeDashoffset = 0;
      subjects.forEach(s=>{
        s.el.style.transform = `translate(-50%,-50%) translate(${s.tx}px,${s.ty}px) scale(1)`;
        s.el.style.opacity   = 1;
      });
    });
  }

  /* run once now and again if the chart is ever resized ---------- */
  layout();
  window.addEventListener("resize",layout);
})();
</script>
</body>
</html>
