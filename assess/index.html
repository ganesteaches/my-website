<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ganes Assess – Interactive Hexagon</title>
<meta charset="UTF-8">

<style>
:root{
  --r1:230;      /* radius to subject icons            */
  --r2:320;      /* radius to GCSE / A-Level / IB ring  */
  --icon:100;    /* subject icon size                   */
  --bubble:70;   /* qualification bubble size           */
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%}
body{
  display:flex;align-items:center;justify-content:center;
  background:transparent;font-family:system-ui;color:#e2e8f0
}
#chart{position:relative;width:900px;height:900px}

/* ────── centre logo ────── */
#centre{
  position:absolute;top:50%;left:50%;width:190px;height:190px;
  transform:translate(-50%,-50%);
  border-radius:50%;overflow:hidden;
  box-shadow:0 0 16px 4px rgba(56,189,248,.35)
}
#centre img{width:100%;height:100%;object-fit:cover}

/* ────── subject icons (nodes) ────── */
.node{
  position:absolute;display:flex;align-items:center;justify-content:center;
  width:var(--icon);height:var(--icon);
  border-radius:50%;overflow:hidden;                /* perfect circle mask */
  border:3px solid #e2e8f0;                         /* neat outline        */
  background:#082f49;cursor:pointer;
  transition:box-shadow .2s;
}
.node img{width:100%;height:100%;object-fit:contain}

.science{filter:drop-shadow(0 0 14px #fb923c)}
.maths  {filter:drop-shadow(0 0 14px #60a5fa)}
.misc   {filter:drop-shadow(0 0 14px #a855f7)}

/* ────── qualification bubbles ────── */
.bubble{
  position:absolute;width:var(--bubble);height:var(--bubble);
  border-radius:50%;background:#082f49;
  border:2px solid #64748b;
  display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:600;text-decoration:none;color:#e2e8f0;
  opacity:0;pointer-events:none;transition:opacity .35s;
}
.bubble.show{opacity:1;pointer-events:auto}

/* ────── hexagon outline ────── */
svg{position:absolute;inset:0;pointer-events:none}
polygon{stroke:#64748b;stroke-width:3;fill:none;opacity:.5}
</style>
</head>
<body>

<div id="chart">
  <svg id="outline"></svg>

  <!-- home link in the middle -->
  <a id="centre" href="https://www.ganesteaches.com/ganes-assess">
      <img src="../ganes_assess.png" alt="Ganes Assess">
  </a>
</div>

<script>
(function(){

/* ───────────── configuration ───────────── */
const BASE   = "https://www.ganesteaches.com/ganes-assess";
const subjects = [
  {label:"Biology",        key:"biology",            icon:"../front_biology_list_icon.png",          cls:"science", angle:150},
  {label:"Chemistry",      key:"chemistry",          icon:"../front_chemistry_list_icon.png",        cls:"science", angle: 90},
  {label:"Physics",        key:"physics",            icon:"../front_physics_list_icon.png",          cls:"science", angle: 30},
  {label:"Mathematics",    key:"mathematics",        icon:"../front_mathematics_list_icon.png",      cls:"maths",   angle:210},
  {label:"Further Maths",  key:"further-mathematics",icon:"../front_further_mathematics_list_icon.png",cls:"maths",   angle:270},
  {label:"Misc",           key:"misc",               icon:"../front_physics_list_icon.png",          cls:"misc",    angle:330}
];
const quals = ["GCSE","A Level","IB"];   /* ring order – left-to-right */

/* ───────────── DOM refs & pre-calc ───────────── */
const chart   = document.getElementById("chart");
const svg     = document.getElementById("outline");
const R1      = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--r1"));
const R2      = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--r2"));
const ICON    = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--icon"));
const BUB     = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--bubble"));
const cx      = chart.clientWidth/2, cy = chart.clientHeight/2;

/* track which subject is currently open */
let activeNode = null;

/* ───────────── helpers ───────────── */
const slug = str => str.toLowerCase().replace(/\s+/g,"-");   // "A Level" → "a-level"

/* fade / unfade siblings on hover */
function fadeOthers(target, toOpacity){
    subjects.forEach(s=>{
        if(s.el !== target) s.el.style.opacity = toOpacity;
    });
}

/* ───────────── create nodes & bubbles ───────────── */
const vertices = [];

subjects.forEach(subject => {

  /* ---- subject vertex position ---- */
  const rad = subject.angle * Math.PI / 180;
  const vx  = cx + R1 * Math.cos(rad);
  const vy  = cy + R1 * Math.sin(rad);
  vertices.push({angle:subject.angle,x:vx,y:vy});

  /* ---- subject button (div, no link) ---- */
  const node = document.createElement("div");
  node.className = `node ${subject.cls}`;
  node.style.left = (vx - ICON/2) + "px";
  node.style.top  = (vy - ICON/2) + "px";
  node.innerHTML  = `<img src="${subject.icon}" alt="${subject.label}">`;
  chart.appendChild(node);
  subject.el = node;

  /* ---- qualification bubbles for this subject ---- */
  subject.bubbles = quals.map((q, i) =>{
      const offset = (-30) + i*30;                        // -30°, 0°, +30°
      const brad   = (subject.angle + offset) * Math.PI / 180;
      const bx     = cx + R2 * Math.cos(brad);
      const by     = cy + R2 * Math.sin(brad);
      const bub    = document.createElement("a");
      bub.className = "bubble";
      bub.textContent = q;
      bub.href   = `${BASE}/${subject.key}/${slug(q)}`;  // …/biology/gcse
      bub.style.left = (bx - BUB/2) + "px";
      bub.style.top  = (by - BUB/2) + "px";
      chart.appendChild(bub);
      return bub;
  });

  /* ---- hover behaviour ---- */
  node.addEventListener("mouseenter", ()=>fadeOthers(node,0.5));
  node.addEventListener("mouseleave", ()=>fadeOthers(node,1));

  /* ---- click behaviour ---- */
  node.addEventListener("click", () =>{
      /* clicking the same active subject closes its ring */
      if(node === activeNode){
          node.classList.remove("active");
          subject.bubbles.forEach(b=>b.classList.remove("show"));
          activeNode = null;
          return;
      }
      /* open this subject’s ring & close any other */
      if(activeNode){
         activeNode.classList.remove("active");
         subjects.find(s=>s.el===activeNode).bubbles
                 .forEach(b=>b.classList.remove("show"));
      }
      activeNode = node;
      node.classList.add("active");
      subject.bubbles.forEach(b=>b.classList.add("show"));
  });
});

/* ───────────── hexagon outline ───────────── */
vertices.sort((a,b)=>a.angle-b.angle);
const pts = vertices.map(v=>`${v.x},${v.y}`).join(" ");
svg.setAttribute("viewBox", `0 0 ${chart.clientWidth} ${chart.clientHeight}`);
const poly = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
poly.setAttribute("points", pts);
svg.appendChild(poly);

})();
</script>
</body>
</html>
