<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dynamic Flow Chart – Ganes Assess</title>
<style>
    :root {
        --radius: 180px;          /* distance from centre to each subject */
        --node-size: 96px;        /* width / height of subject nodes      */
    }

    * { box-sizing: border-box; }

    body {
        margin: 0;
        height: 100vh;
        display: flex;
        align-items: centre;
        justify-content: centre;
        background: #f8fafc;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    #chart {
        position: relative;
        width: 600px;
        height: 600px;
    }

    /* ---------- centre node ---------- */
    #centre {
        position: absolute;
        top: 50%; left: 50%;
        width: 140px; height: 140px;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,.15);
        overflow: hidden;
    }
    #centre img { width: 100%; height: 100%; object-fit: cover; }

    /* ---------- subject nodes ---------- */
    .node {
        position: absolute;
        width: var(--node-size);
        height: var(--node-size);
        border-radius: 18px;
        background: #ffffff;
        box-shadow: 0 3px 6px rgba(0,0,0,.12);
        display: flex;
        align-items: centre;
        justify-content: centre;
        opacity: 0;
        pointer-events: none;     /* protected until revealed */
        transition: opacity .4s;
        animation: wobble 4s ease-in-out alternate infinite;
    }
    .node img {
        max-width: 70%;
        max-height: 70%;
    }

    /* ---------- wobble animation ---------- */
    @keyframes wobble {
        0%   { transform: translate(-50%, -50%) translate(  0px,  0px) rotate( 0deg); }
        50%  { transform: translate(-50%, -50%) translate(  6px, -4px) rotate( 3deg); }
        100% { transform: translate(-50%, -50%) translate( -4px,  6px) rotate(-3deg); }
    }

    /* ---------- lines ---------- */
    #lines {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
    }
    line {
        stroke: #475569;
        stroke-width: 2;
        stroke-dasharray: 4 2;
        opacity: 0;
        transition: opacity .4s;
    }

    /* ---------- visible state ---------- */
    .visible .node,
    .visible line { opacity: 1; pointer-events: auto; }

</style>
</head>
<body>
<div id="chart">
    <!-- SVG canvas for the connecting lines -->
    <svg id="lines"></svg>

    <!-- centre node -->
    <div id="centre">
        <img src="ganes_assess.png" alt="Ganes Assess">
    </div>

    <!-- subject nodes (initially hidden) -->
    <div class="node" data-subject="Biology"            style="--index:0"><img src="front_biology_list_icon.png"            alt="Biology"></div>
    <div class="node" data-subject="Chemistry"          style="--index:1"><img src="front_chemistry_list_icon.png"          alt="Chemistry"></div>
    <div class="node" data-subject="Further Mathematics" style="--index:2"><img src="front_further_mathematics_list_icon.png" alt="Further Mathematics"></div>
    <div class="node" data-subject="Mathematics"        style="--index:3"><img src="front_mathematics_list_icon.png"        alt="Mathematics"></div>
    <div class="node" data-subject="Physics"            style="--index:4"><img src="front_physics_list_icon.png"            alt="Physics"></div>
</div>

<script>
(function () {
    const chart   = document.getElementById('chart');
    const centre  = document.getElementById('centre');
    const nodes   = Array.from(document.querySelectorAll('.node'));
    const svg     = document.getElementById('lines');
    const radius  = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--radius'));
    const nodeSz  = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--node-size'));
    const toRad   = deg => deg * Math.PI / 180;

    /* create SVG lines (one per subject) ----------------------------------- */
    const lines = nodes.map(() => {
        const l = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        svg.appendChild(l);
        return l;
    });

    /* position subject nodes in a regular pentagon ------------------------- */
    function positionNodes () {
        const rect = chart.getBoundingClientRect();
        const cx   = rect.width  / 2;
        const cy   = rect.height / 2;

        nodes.forEach((node, i) => {
            const angle = -90 + i * 72;     // start at top (-90°) and go clockwise
            const x = cx + radius * Math.cos(toRad(angle)) - nodeSz/2;
            const y = cy + radius * Math.sin(toRad(angle)) - nodeSz/2;
            node.style.left = `${x}px`;
            node.style.top  = `${y}px`;
        });

        /* resize SVG to cover whole chart */
        svg.setAttribute('viewBox', `0 0 ${rect.width} ${rect.height}`);
    }

    window.addEventListener('resize', positionNodes);
    positionNodes();

    /* toggle visibility on centre click ------------------------------------ */
    centre.addEventListener('click', () => {
        chart.classList.toggle('visible');
    });

    /* keep lines anchored while nodes wobble ------------------------------- */
    function updateLines () {
        const rect = chart.getBoundingClientRect();
        const cx   = rect.width  / 2;
        const cy   = rect.height / 2;

        nodes.forEach((node, i) => {
            const box = node.getBoundingClientRect();
            const x = box.left - rect.left + box.width  / 2;
            const y = box.top  - rect.top  + box.height / 2;
            lines[i].setAttribute('x1', cx);
            lines[i].setAttribute('y1', cy);
            lines[i].setAttribute('x2', x);
            lines[i].setAttribute('y2', y);
        });

        requestAnimationFrame(updateLines);
    }
    updateLines();
})();
</script>
</body>
</html>
