<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Three Independent Hexagons (larger)</title>
  <style>
    :root {
      --r1:     150px;  /* radius to peripheral nodes */
      --icon:   75px;   /* diameter of each peripheral node */
      --centre: 180px;  /* diameter of the centre icon */
    }

    /* reset */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0 }
    html, body { width: 100%; height: 100% }
    body {
      display:        flex;
      align-items:    center;
      justify-content: center;
      background:     #1a1a1a;
      color:          #e2e8f0;
      font-family:    system-ui, sans-serif;
      gap:            60px;
    }

    /* three charts in a row */
    .row {
      display: flex;
      gap:     40px;
    }

    /* chart container */
    .chart {
      position: relative;
      width:  calc(var(--r1) * 2);
      height: calc(var(--r1) * 2);
    }

    /* centre icon */
    .centre {
      position: absolute;
      top:  50%; left: 50%;
      width:  var(--centre);
      height: var(--centre);
      transform: translate(-50%,-50%);
      border-radius: 50%;
      overflow: hidden;
      filter: drop-shadow(0 0 16px rgba(56,189,248,.35));
      z-index: 3;
    }
    .centre img {
      width: 100%; height: 100%; object-fit: cover;
    }

    /* peripheral nodes */
    .node {
      position: absolute; left:50%; top:50%;
      width:  var(--icon); height: var(--icon);
      border-radius: 50%;
      border:        3px solid #e2e8f0;
      background:    #1a1a1a;
      transform:     translate(-50%,-50%) scale(0.5);
      opacity:       0;
      transition:
        transform 4s cubic-bezier(.23,1,.32,1),
        opacity   3s cubic-bezier(.23,1,.32,1);
      display:      flex;
      align-items:  center;
      justify-content: center;
      z-index:      1;
    }
    .node .label {
      font-size: 12px; font-weight: 600;
      color: #e2e8f0; pointer-events: none;
      white-space: nowrap;
    }

    /* SVG fills its chart */
    .chart svg {
      position: absolute;
      top:    0; left: 0;
      width:  100%;
      height: 100%;
      pointer-events: none;
    }
    .chart svg polygon {
      stroke:        #64748b;
      stroke-width:  3;
      fill:          none;
      opacity:       .5;
      transition:    stroke-dashoffset 3s cubic-bezier(.23,1,.32,1);
    }

    /* drop-shadow classes */
    .science { filter: drop-shadow(0 0 14px #fb923c) }
    .maths   { filter: drop-shadow(0 0 14px #60a5fa) }
    .misc    { filter: drop-shadow(0 0 14px #a855f7) }
  </style>
</head>
<body>

  <div class="row">
    <div id="chart-1" class="chart"></div>
    <div id="chart-2" class="chart"></div>
    <div id="chart-3" class="chart"></div>
  </div>

  <script>
  (function(){
    const BASE = "https://www.ganesteaches.com/ganes-revise";
    const R1   = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--r1"));

    // centre charts with custom start indices and directions
    // levels order: [ "11＋", "13＋", "KS3", "GCSE", "A Level", "University" ]
    const centres = [
      {
        id:         "chart-1",
        label:      "Biology",
        key:        "biology",
        icon:       "../biology_list_icon.png",
        cls:        "science",
        // start at "University" (index 5), clockwise
        startAngle: -90 + 5 * 60,
        direction:   1
      },
      {
        id:         "chart-2",
        label:      "Chemistry",
        key:        "chemistry",
        icon:       "../chemistry_list_icon.png",
        cls:        "science",
        // start at "GCSE" (index 3), anticlockwise
        startAngle: -90 + 3 * 60,
        direction:  -1
      },
      {
        id:         "chart-3",
        label:      "Physics",
        key:        "physics",
        icon:       "../physics_list_icon.png",
        cls:        "science",
        // start at "13＋" (index 1) = -30°, clockwise
        startAngle: -30,
        direction:   1
      }
    ];

    const levels = [
      { label:"11＋",       key:"11plus"    },
      { label:"13＋",       key:"13plus"    },
      { label:"KS3",        key:"ks3"       },
      { label:"GCSE",       key:"gcse"      },
      { label:"A Level",    key:"a-level"   },
      { label:"University", key:"university"}
    ];

    function drawHexagon(svg, cx, cy, radius, startAngleDeg = -90, direction = 1) {
      const pts = Array.from({length: 6}, (_, i) => {
        const angleDeg = startAngleDeg + direction * i * 60;
        const rad      = angleDeg * Math.PI / 180;
        return [
          cx + radius * Math.cos(rad),
          cy + radius * Math.sin(rad)
        ];
      });

      const poly = document.createElementNS(svg.namespaceURI, "polygon");
      poly.setAttribute("points", pts.map(p => p.join(",")).join(" "));
      svg.appendChild(poly);

      const perimeter = pts.reduce((sum, [x,y], i) => {
        const [nx, ny] = pts[(i + 1) % pts.length];
        return sum + Math.hypot(nx - x, ny - y);
      }, 0);

      poly.style.strokeDasharray  = perimeter;
      poly.style.strokeDashoffset = perimeter;
      requestAnimationFrame(() => {
        poly.style.strokeDashoffset = 0;
      });
    }

    centres.forEach(cfg => {
      const chart = document.getElementById(cfg.id);
      if (!chart) {
        console.warn(`No chart container with id="${cfg.id}" — skipping.`);
        return;
      }

      const cx = chart.clientWidth  / 2;
      const cy = chart.clientHeight / 2;

      // SVG container
      const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
      svg.setAttribute("viewBox", `0 0 ${2*R1} ${2*R1}`);
      chart.appendChild(svg);

      // centre icon
      const centre = document.createElement("a");
      centre.className = "centre " + cfg.cls;
      centre.href      = `${BASE}/${cfg.key}`;
      centre.target    = "_blank";
      centre.rel       = "noopener";
      centre.innerHTML = `<img src="${cfg.icon}" alt="${cfg.label}">`;
      chart.appendChild(centre);

      // peripheral nodes
      levels.forEach((lvl, i) => {
        const angle = -90 + i * 60;
        const rad   = angle * Math.PI / 180;
        const x     = cx + R1 * Math.cos(rad);
        const y     = cy + R1 * Math.sin(rad);

        const node = document.createElement("a");
        node.className    = `node ${cfg.cls}`;
        node.href         = `${BASE}/${cfg.key}/${lvl.key}`;
        node.target       = "_blank";
        node.rel          = "noopener";
        node.style.left   = `${x}px`;
        node.style.top    = `${y}px`;
        node.innerHTML    = `<span class="label">${lvl.label}</span>`;
        chart.appendChild(node);

        requestAnimationFrame(() => {
          node.style.opacity   = 1;
          node.style.transform = "translate(-50%,-50%) scale(1)";
        });
      });

      // hexagon outline with custom start & direction
      try {
        drawHexagon(svg, cx, cy, R1, cfg.startAngle, cfg.direction);
      } catch(e) {
        console.error(`Hexagon outline failed for ${cfg.id}:`, e);
      }
    });
  })();
  </script>

</body>
</html>
