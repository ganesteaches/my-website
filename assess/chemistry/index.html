<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chemistry Branch Hexagon Chain</title>
  <style>
    :root {
      --r1:       150px;   /* hexagon radius */
      --centre:   180px;   /* diameter of centre icon */
      --icon:      50px;   /* diameter of each node */
    }
    *, *::before, *::after { box-sizing: border-box; margin:0; padding:0 }
    html, body { width:100%; height:100% }
    body {
      display: flex; align-items: center; justify-content: center;
      background: #111; font-family: system-ui, sans-serif;
    }
    .container {
      position: relative;
      width: calc(2*var(--r1) + 2*sqrt(3)*var(--r1));
      height: calc(2*var(--r1));
    }
    .container svg {
      position: absolute; inset: 0; pointer-events: none;
    }

    .centre {
      position: absolute;
      width: var(--centre); height: var(--centre);
      border-radius: 50%;
      overflow: visible;
      transform: translate(-50%, -50%);
      z-index: 3;
    }
    .centre.organic   { box-shadow: 0 0 24px #4ade80 }
    .centre.inorganic { box-shadow: 0 0 24px #fbbf24 }
    .centre.physical  { box-shadow: 0 0 24px #60a5fa }
    .centre img {
      width:100%; height:100%; object-fit: cover; border-radius:50%;
    }

    .node {
      position: absolute;
      width: var(--icon); height: var(--icon);
      border-radius: 50%; background: #111; border: 2px solid #fff;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: 600; color: #fff;
      opacity: 0; transform: translate(-50%,-50%) scale(.5);
      transition: transform .4s ease, opacity .4s ease;
      z-index: 1;
    }
    .node.organic   { box-shadow: 0 0 12px #4ade80 }
    .node.inorganic { box-shadow: 0 0 12px #fbbf24 }
    .node.physical  { box-shadow: 0 0 12px #60a5fa }

    .hexagon {
      stroke: #374151; stroke-width: 2; fill: none;
      stroke-dasharray: 1000; stroke-dashoffset: 1000;
      transition: stroke-dashoffset 1s ease;
    }
  </style>
</head>
<body>
  <div class="container" id="container"></div>

  <script>
  (function() {
    const BASE    = "https://your-site.com/chemistry";
    const R1      = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--r1"));
    const spacing = Math.sqrt(3) * R1;
    const branches = [
      { key:"organic",   cls:"organic",   icon:"icons/organic.png",   title:"Organic Chemistry"   },
      { key:"inorganic", cls:"inorganic", icon:"icons/inorganic.png", title:"Inorganic Chemistry" },
      { key:"physical",  cls:"physical",  icon:"icons/physical.png",  title:"Physical Chemistry"  }
    ];
    const topics = Array.from({length:14},(_,i)=>({label:String(i+1),key:`topic-${i+1}`}));

    // set up container
    const cont = document.getElementById("container");
    cont.style.width  = (2*R1 + 2*spacing) + "px";
    cont.style.height = (2*R1) + "px";

    // one big SVG
    const svgNS = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgNS,"svg");
    svg.setAttribute("viewBox",`0 0 ${2*R1+2*spacing} ${2*R1}`);
    svg.style.width  = "100%";
    svg.style.height = "100%";
    cont.appendChild(svg);

    function drawHex(cx,cy) {
      const pts = Array.from({length:6},(_,i)=>{
        const ang = (-90 + i*60)*Math.PI/180;
        return [cx + R1*Math.cos(ang), cy + R1*Math.sin(ang)];
      });
      const poly = document.createElementNS(svgNS,"polygon");
      poly.setAttribute("points", pts.map(p=>p.join(",")).join(" "));
      poly.classList.add("hexagon");
      svg.appendChild(poly);
      // animate dash
      const perim = pts.reduce((sum,[x,y],i)=>{
        const [nx,ny] = pts[(i+1)%6];
        return sum + Math.hypot(nx-x,ny-y);
      },0);
      poly.style.strokeDasharray  = perim;
      poly.style.strokeDashoffset = perim;
      requestAnimationFrame(()=> poly.style.strokeDashoffset = "0");
      return pts;
    }

    // draw hexagons & centres
    let verts = [];
    branches.forEach((b,i)=>{
      const cx = R1 + i*spacing, cy = R1;
      verts = verts.concat(drawHex(cx,cy));
      const ctr = document.createElement("a");
      ctr.className = `centre ${b.cls}`;
      ctr.href      = `${BASE}/${b.key}`;
      ctr.title     = b.title;
      ctr.style.left = cx + "px";
      ctr.style.top  = cy + "px";
      ctr.innerHTML = `<img src="${b.icon}" alt="${b.title}">`;
      cont.appendChild(ctr);
    });

    // dedupe â†’ 14 unique vertices
    const unique = [];
    const tol = 1;
    verts.forEach(pt=>{
      if (!unique.some(u=>Math.abs(u[0]-pt[0])<tol && Math.abs(u[1]-pt[1])<tol)) {
        unique.push(pt);
      }
    });

    // place numbered nodes
    unique.forEach(([x,y],i)=>{
      const node = document.createElement("a");
      node.className = `node ${branches[Math.floor(i/5)]?.cls || branches[0].cls}`;
      node.href      = `${BASE}/${branches[0].key}/${topics[i].key}`;
      node.title     = `Topic ${topics[i].label}`;
      node.style.left = x + "px";
      node.style.top  = y + "px";
      node.textContent = topics[i].label;
      cont.appendChild(node);
      setTimeout(()=>{
        node.style.opacity   = "1";
        node.style.transform = "translate(-50%,-50%) scale(1)";
      }, 100 + i*60);
    });
  })();
  </script>
</body>
</html>
