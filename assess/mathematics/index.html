<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Mathematics Branch Hexagon Chain</title>

<style>
  :root{
    --r1:     187.5px;   /* hexagon “radius” (150 × 1.25)          */
    --centre: 180px;     /* centre-icon diameter                    */
    --icon:    67.5px;   /* peripheral-node diameter (25 % smaller) */
  }

  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html,body{width:100%;height:100%}
  body{
    display:flex;align-items:center;justify-content:center;
    background:#111;font-family:system-ui,sans-serif;
    colour:#fff;
  }

  .container{position:relative}
  .container svg{position:absolute;inset:0;pointer-events:none}

  /* ──────────── centre icons ──────────── */
  .centre{
    position:absolute;width:var(--centre);height:var(--centre);
    border-radius:50%;overflow:visible;
    transform:translate(-50%,-50%);z-index:3;
    transition:box-shadow .3s ease;
  }
  .centre.pure       {box-shadow:0 0 24px #ffffff}
  .centre.statistics {box-shadow:0 0 24px #ffb347}
  .centre.mechanics  {box-shadow:0 0 24px #a2d2ff}

  .centre.pure:hover       {box-shadow:0 0 34px #ffffff}
  .centre.statistics:hover {box-shadow:0 0 34px #ffb347}
  .centre.mechanics:hover  {box-shadow:0 0 34px #a2d2ff}

  .centre img{
    width:100%;height:100%;object-fit:cover;border-radius:50%;
    transition:transform .3s ease;
  }
  .centre:hover img{transform:scale(1.1)}

  .centre::after{
    content:attr(data-label);
    position:absolute;top:calc(100% + 6px);left:50%;
    transform:translateX(-50%);
    font-size:14px;font-weight:700;color:#fff;
    background:rgba(255,255,255,0.1);
    padding:2px 8px;border-radius:6px;
    transition:background-colour .25s ease, colour .25s ease, box-shadow .25s ease;
  }
  .centre:hover::after{
    background:#FFE5B4;
    colour:#000;
    box-shadow:0 0 8px rgba(255,229,180,.6);
  }

  /* ──────────── topic circles ──────────── */
  .node{
    position:absolute;width:var(--icon);height:var(--icon);
    border-radius:50%;background:#111;border:2px solid #fff;
    display:flex;align-items:center;justify-content:center;
    opacity:0;transform:translate(-50%,-50%) scale(.5);
    transition:transform .35s ease,opacity .35s ease;z-index:1;
  }
  .node.pure       {box-shadow:0 0 12px #ffffff}
  .node.statistics {box-shadow:0 0 12px #ffb347}
  .node.mechanics  {box-shadow:0 0 12px #a2d2ff}

  /* enlarge & brighten on hover */
  .node:hover{
    transform:translate(-50%,-50%) scale(1.15);
    box-shadow:0 0 18px currentColour;
  }

  .node::after{
    content:attr(data-label);
    position:absolute;top:calc(100% + 4px);left:50%;
    transform:translateX(-50%);
    font-size:10px;font-weight:600;color:#fff;
    line-height:1.15;white-space:nowrap;
    opacity:.5;pointer-events:none;
    transition:opacity .3s ease;
  }
  .node:hover::after{opacity:1}

  /* ──────────── hexagon outline ──────────── */
  .hexagon{
    stroke:#374151;stroke-width:2;fill:none;
    stroke-dasharray:1000;stroke-dashoffset:1000;
    transition:stroke-dashoffset 1s ease;
  }
</style>
</head>

<body>
  <div class="container" id="container"></div>

<script>
/* slug helper */
const slugify = s => s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');

(function(){
  const BASE='https://www.ganesteaches.com/ganes-assess/mathematics';
  const R1=parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--r1'));
  const spacing=Math.sqrt(3)*R1;

  const branches=[
    {
      key:'pure',cls:'pure',icon:'pure_icon.png',title:'Pure Mathematics',posIndex:1,label:'Pure',dir:1,
      topics:[
        {label:'Proof & Algebraic',full:'Proof & Algebraic Techniques'},
        {label:'Coordination Geometry',full:'Coordination Geometry'},
        {label:'Sequence',full:'Sequence'},
        {label:'Trigonometry',full:'Trigonometry'},
        {label:'Calculus',full:'Calculus'},
        {label:'Numerical Methods',full:'Approximation & Numerical Methods'}
      ]
    },
    {
      key:'statistics',cls:'statistics',icon:'stats_icon.png',title:'Statistics',posIndex:0,label:'Statistics',dir:-1,
      topics:[
        {label:'Sampling',full:'Statistical sampling'},
        {label:'Data Presentation',full:'Data presentation & interpretation'},
        {label:'Probability',full:'Probability'},
        {label:'Distributions',full:'Statistical distributions'}
      ]
    },
    {
      key:'mechanics',cls:'mechanics',icon:'mech_icon.png',title:'Mechanics',posIndex:2,label:'Mechanics',dir:-1,
      topics:[
        {label:'Units',full:'Quantities and units in mechanics'},
        {label:'Kinematics',full:'Kinematics'},
        {label:'Forces',full:'Forces & Newton’s laws'},
        {label:'Moments',full:'Moments'}
      ]
    }
  ];

  /* container size */
  const cont=document.getElementById('container');
  const totalW=2*R1+2*spacing;
  const totalH=2*R1;
  cont.style.width=totalW+'px';
  cont.style.height=totalH+'px';

  /* SVG for outlines */
  const svgNS='http://www.w3.org/2000/svg';
  const svg=document.createElementNS(svgNS,'svg');
  svg.setAttribute('viewBox',`0 0 ${totalW} ${totalH}`);
  svg.style.width='100%';
  svg.style.height='100%';
  cont.appendChild(svg);

  /* draw a hexagon (dir=+1 clockwise, -1 anticlockwise) */
  function drawHex(cx,cy,dir){
    const pts=Array.from({length:6},(_,i)=>{
      const ang=(-90+dir*i*60)*Math.PI/180;
      return[cx+R1*Math.cos(ang),cy+R1*Math.sin(ang)];
    });
    const poly=document.createElementNS(svgNS,'polygon');
    poly.setAttribute('points',pts.map(p=>p.join(',')).join(' '));
    poly.classList.add('hexagon');
    svg.appendChild(poly);

    const perim=pts.reduce((s,[x,y],i)=>{
      const[nx,ny]=pts[(i+1)%6];
      return s+Math.hypot(nx-x,ny-y);
    },0);
    poly.style.strokeDasharray=perim;
    poly.style.strokeDashoffset=perim;
    requestAnimationFrame(()=>poly.style.strokeDashoffset='0');
    return pts;
  }

  /* draw hexagons & centre icons */
  let verts=[];
  branches.forEach(b=>{
    const cx=R1+b.posIndex*spacing, cy=R1;
    verts.push(...drawHex(cx,cy,b.dir));

    const a=document.createElement('a');
    a.className=`centre ${b.cls}`;
    a.href=`${BASE}/a-level/${b.key}`;
    a.title=b.title;
    a.setAttribute('data-label',b.label);
    a.style.left=cx+'px';
    a.style.top =cy+'px';
    a.innerHTML=`<img src="${b.icon}" alt="${b.title}">`;
    cont.appendChild(a);
  });

  /* unique vertices (14) */
  const unique=[]; const tol=1;
  verts.forEach(p=>{
    if(!unique.some(u=>Math.abs(u[0]-p[0])<tol && Math.abs(u[1]-p[1])<tol)){unique.push(p);}
  });

  /* place topic nodes */
  const count=[0,0,0];
  unique.forEach(([x,y],i)=>{
    const bIdx = i<6 ? 0 : (i<10 ? 1 : 2);
    const b=branches[bIdx];
    const idx=count[bIdx]++;
    if(idx>=b.topics.length) return;

    const {label,full}=b.topics[idx];
    const slug=slugify(full);

    const n=document.createElement('a');
    n.className=`node ${b.cls}`;
    n.href=`${BASE}/a-level/${b.key}/${slug}`;
    n.title=full;
    n.style.left=x+'px';
    n.style.top =y+'px';
    n.setAttribute('data-label',label);
    cont.appendChild(n);

    /* animate in */
    setTimeout(()=>{n.style.opacity='1';n.style.transform='translate(-50%,-50%) scale(1)';},
               100+i*60);
  });
})();
</script>
</body>
</html>
